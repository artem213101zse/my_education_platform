{% extends 'education/base.html' %}

{% block content %}
<div class="container my-5">
    <h1 class="text-dark fw-bold mb-4">Добавить контент в модуль "{{ module.title }}"</h1>
    <div class="card shadow-lg border-0 rounded-4 p-4 bg-white">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="mb-3">
                <label for="content_type" class="form-label text-dark fw-bold">Тип контента</label>
                <select name="content_type" id="content_type" class="form-select rounded-3" onchange="toggleFields()">
                    <option value="text">Текст</option>
                    <option value="video">Видео</option>
                    <option value="image">Изображение</option>
                    <option value="file">Файл</option>
                    <option value="quiz">Тест</option>
                </select>
            </div>

            <div id="text_field" class="mb-3 content-field">
                <label for="text" class="form-label text-dark fw-bold">Текст</label>
                <textarea name="text" id="text" class="form-control rounded-3" rows="5"></textarea>
            </div>

            <div id="video_url_field" class="mb-3 content-field" style="display: none;">
                <label for="video_url" class="form-label text-dark fw-bold">Ссылка на видео</label>
                <input type="url" name="video_url" id="video_url" class="form-control rounded-3">
            </div>

            <div id="video_file_field" class="mb-3 content-field" style="display: none;">
                <label for="video_file" class="form-label text-dark fw-bold">Или загрузите видео</label>
                <input type="file" name="video_file" id="video_file" class="form-control rounded-3">
            </div>

            <div id="image_field" class="mb-3 content-field" style="display: none;">
                <label for="image" class="form-label text-dark fw-bold">Изображение</label>
                <input type="file" name="image" id="image" class="form-control rounded-3">
            </div>

            <div id="file_field" class="mb-3 content-field" style="display: none;">
                <label for="file" class="form-label text-dark fw-bold">Файл</label>
                <input type="file" name="file" id="file" class="form-control rounded-3">
            </div>

            <div id="quiz_field" class="mb-3 content-field" style="display: none;">
                <label for="title" class="form-label text-dark fw-bold">Название теста</label>
                <input type="text" name="title" id="title" class="form-control rounded-3">
            </div>

            <button type="submit" class="btn btn-primary rounded-pill px-5 py-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle me-2" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 0 0 8 0a8 8 0 0 0 0 16"/>
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                </svg>
                Добавить
            </button>
        </form>
    </div>
</div>

<script>
    function toggleFields() {
        const contentType = document.getElementById('content_type').value;
        const fields = ['text_field', 'video_url_field', 'video_file_field', 'image_field', 'file_field', 'quiz_field'];

        fields.forEach(field => {
            document.getElementById(field).style.display = 'none';
        });

        if (contentType === 'text') {
            document.getElementById('text_field').style.display = 'block';
        } else if (contentType === 'video') {
            document.getElementById('video_url_field').style.display = 'block';
            document.getElementById('video_file_field').style.display = 'block';
        } else if (contentType === 'image') {
            document.getElementById('image_field').style.display = 'block';
        } else if (contentType === 'file') {
            document.getElementById('file_field').style.display = 'block';
        } else if (contentType === 'quiz') {
            document.getElementById('quiz_field').style.display = 'block';
        }
    }

    document.addEventListener('DOMContentLoaded', toggleFields);
</script>
{% endblock %}